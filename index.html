
<!DOCTYPE html>
<html>
<head>
	<title>Project 1 </title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.min.js" charset="utf-8"></script>
	<style>
    	text { 
			font-family: Arial; 
			font-size: 15px;
		}
		.axis path, .axis line {
			fill: none;
			stroke: black;
			shape-rendering: crispEdges;
		}
		.tick text {
			fill: black;
			font-size: 11px;
		}
	</style>
</head>
<body>
<svg id="main" width="800" height="1200">
	
		<text id='titleData' class = 'menu' x='100' y='70' style= font-size:20></text>
		<text id='titleCoun' class = 'menu' x='100' y='260' style = font-size:15></text>
		<text id='titleYear' class = 'menu' x='100' y='100' style = font-size:15></text>
		<!--below are texts for menu box-->
		<!--the position of the text will be determined later with variable, using .attr-->
		<!--title GRAPH TYPE-->
		<text id='titleGraph' class = 'menu' x='650' y = '50'>Graph Type</text>
		<!--title DATA TYPE-->
		<text id='titleDisplay' class = 'menu'>Data Type</text>
		<!--title YEAR-->
		<text id='titleYearMenu' class = 'menu'>Year</text>
		<!--title Region/Country-->
		<text id='titleCounMenu' class = 'menu'>Country/Region</text>
	</svg>
	<!--radio button BAR CHART-->
	<input type="radio" id ="radioBarchart" name ="chart" onclick = "radioBarchartOn();" value="bar" checked style="position: absolute; left: 650px; top: 100px"> 
	<!--radio button SCATTERPLOT-->
	<input type="radio" id ="radioScatterplot" name ="chart" onclick = "radioScatterOn();" value "scatter" style="position: absolute; left: 650px; top: 140px"> 
	<!--sub-checkbox LINE CHART-->
	<input type="checkbox" id = "checkboxLinegraph" name = "chart" style= "position: absolute; left: 680px; top: 120px"> 
	<!--sub checkbok ANIMATE SCATTERPLOT--->
	<input type="checkbox" id = "checkboxScatterplot" name = "chart" style="position: absolute; left: 680px; top: 160px"> 
	<!--drop-down for available data types-->
	<select id="selectEnergytype" style="position: absolute; left: 650px; top: 200px">
	<option id="total energy">Total Primary Energy</option>
	<option id="total elec">Total Electricity</option>
	<option id="renew elec">Renewable Electricity</option>
	<option id="renew bio">Renewable Biofuel</option>
	<option id="coal">Coal</option>
	<option id="petroleum">Petroleum</option>
	<option id="co2">CO2 Emissions per Capita</option>
	</select>
	<!--checkbox for production/consumption (by defalut select both)-->
	<input type="checkbox" id = "checkboxPro" name = "chart" checked style="position: absolute; left: 680px; top: 220px"> 
	<input type="checkbox" id = "checkboxCon" name = "chart"  checked style="position: absolute; left: 680px; top: 240px"> 
	<!--2 dropdown boxes for year side by side (from A to B)-->
	<select id="selectYearfrom" name = "chart"  style="position: absolute; left: 650px; top: 260px">
	</select>
	<select id="selectYearto" name = "chart" style="position: absolute; left: 750px; top: 260px">
	<option selected="selected" hidden >2012</option>
	</select>
	<!--drop-down for country name and region name-->
	<select id="selectionWidget" name = "chart" style="position: absolute; left: 650px; top: 300px">
	</select>
	<!--button RESET-->
	<!--when clicked, reset every setting to default-->
	<button id="buttonReset" name = "chart" style="position: absolute; left: 650px; top: 330px">Restore Default</button>
	  <!--add a little space-->
	  <!--button ADVANCED OPTION-->
	  <!--it triggers a pop-up box-->
	<button id="buttonAdvanced" name = "chart" style="position: absolute; left: 650px; top: 370px">Advanced option</button>
	<button id="buttonComparison" name = "chart" style="position: absolute; left: 650px; top: 420px">Compare different regions</button>
	<script>
	
		var listOfLocalities = [];
		console.log(listOfLocalities)
		var localities = {};//total energy production
		var localitiesEnCon = {};//total energy consumption
		var localitiesCO2 = {};
		var localitiesCoalPro = {};
		var localitiesCoalCon = {};
		var localitiesPetroPro = {};
		var localitiesPetroCon = {};
		var localitiesRenewBioPro = {};
		var localitiesRenewBioCon = {};
		var localitiesRenewElectPro = {};
		var localitiesRenewElectCon = {};
		var localitiesElectPro = {};
		var localitiesElectCon = {};
		
		var totalYear = [];
		console.log(localitiesElectPro)
		console.log(localitiesElectCon)
		//make an array of total years in the data to use it in YEAR dropdown
		function totalYearCal(){
			for (var i = 1980; i <2013; i++)
			   totalYear.push(i)};
		//call the function 
		totalYearCal();
		
		//bring in data in each csv files
		Papa.parse('data/total_primary_energy_production.csv', {
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localities[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
				
			Papa.parse('data/total_primary_energy_consumption.csv', {
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesEnCon[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/co2_emissions_per_capita.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesCO2[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/coal_consumption.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesCoalCon[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			
			
			Papa.parse('data/coal_production.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesCoalPro[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/petroleum_consumption.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesPetroCon[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/petroleum_production.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesPetroPro[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/renewable_biofuel_consumption.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesRenewBioCon[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/renewable_biofuel_production.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesRenewBioPro[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/renewable_electricity_consumption.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesRenewElectCon[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/renewable_electricity_generation.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesRenewElectPro[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/total_electricity_consumption.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesElectCon[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			Papa.parse('data/total_electricity_generation.csv', {
		
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				for (var row=0; row < results.data.length; row++)
				{
					var record = results.data[row];
					
					// make an object to store data for the current locality
					var locality = {
						name: record.Locality,
						energyProduction: []
					}

					// loop through all years, from 1980 to 2012
					for (var year=1980; year<=2012; year++) 
					{
						var value = record[year];

						// deal with missing data points
						if (value === '--') {
							value = 0;
						}
						else if (value === 'NA') {
							value = 0;
						}
						else if (value === '(s)') {
							value = 0;
						}
						else if (value === 'W') {
							value = 0;
						}

						// add record of current energy production
						locality.energyProduction.push( value );
					}

					// add the current locality to an index
					localitiesElectPro[ locality.name] = locality;
					listOfLocalities.push( locality.name );
				}
			}})
			}})
			}})
			}})
			}})
			}})
			}})
			}})
			}})
			}})
			}})
			}})
////////////////////////////////////////////////////////////////////////			
////////////////////End of data retrieval///////////////////////////////	
////////////////////////////////////////////////////////////////////////		
			//this is the value that determines if the graph has one or two data relating to energy type
				var bothOn = 1;
				var proOn = 2;
				var conOn = 3;
				var bothOff = 0;
			
				// make chart
				//if Bar chart is selected (radio) --- default state
//////////////////THIS PART NEEDS CORRECTION LATER//////energyType2 not correctly passed for some mindbreaking reason
				drawBarChart('North America', 1980, 2012, localities, localities, bothOn);
				  
				// populate selection list
				d3.select('#selectionWidget').selectAll('option').data(listOfLocalities).enter().append('option')
					.html(function(d) { return d; })
					.attr('value', function(d) { return d; })

				d3.select("#selectionWidget")
					.on('change', function() {

						// clear the contents of the chart
						d3.select("#main").selectAll('g').remove();

						// figure out the newly selected locality
						var selection = document.getElementById('selectionWidget');
						var localityName = selection.options[selection.selectedIndex].value;

						var selection= document.getElementById('selectYearfrom');
					    var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					    var selection= document.getElementById('selectYearto');
					    var selectedYearto = selection.options[selection.selectedIndex].value;
						
						var selection=document.getElementById("selectEnergytype");
						var selectedEnergy=selection.options[selection.selectedIndex].value;
						console.log('new locality: ' + localityName);
						//check out if it is for production or consumption....now starting to wonder why I designed this way. Kore. Shindoi.
//there must be a better way
						//re-draw bar chart for the new locality
						//re-draw according to the selection in the menu box
						var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
						
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
						
					});
					
				//change graph according to the energy type selection
				d3.select("#selectEnergytype")
					.on('change', function() {

						// clear the contents of the chart
						d3.select("#main").selectAll('g').remove();

						// figure out the newly selected locality
						var selection = document.getElementById('selectionWidget');
						var localityName = selection.options[selection.selectedIndex].value;

						var selection= document.getElementById('selectYearfrom');
					    var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					    var selection= document.getElementById('selectYearto');
					    var selectedYearto = selection.options[selection.selectedIndex].value;
						
						var selection=document.getElementById("selectEnergytype");
						var selectedEnergy=selection.options[selection.selectedIndex].value;

						//re-draw bar chart for the new locality
						//re-draw according to the selection in the menu box
						var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
						
						//pass another variable to the function that determines if this graph deals with one data or two
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									   drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
						
					});
					

				//drawing linegraph if checkbox is checed
				d3.select("#checkboxLinegraph")
				   .on('change', function(){
				   // clear the contents of the chart
						d3.select("#main").selectAll('g').remove();

						// figure out the newly selected locality
						var selection = document.getElementById('selectionWidget');
						var localityName = selection.options[selection.selectedIndex].value;

						var selection= document.getElementById('selectYearfrom');
					    var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					    var selection= document.getElementById('selectYearto');
					    var selectedYearto = selection.options[selection.selectedIndex].value;
						
						var selection=document.getElementById("selectEnergytype");
						var selectedEnergy=selection.options[selection.selectedIndex].value;

						//re-draw bar chart for the new locality
						//re-draw according to the selection in the menu box
						var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
						
						//pass another variable to the function that determines if this graph deals with one data or two
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								 drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
					});
				   
			//this is the 2 dropdowns for year
			//enter contents for dropdowns
			d3.select('#selectYearfrom').selectAll('option')
			        .data(totalYear)
			        .enter().append('option')
					.html(function(d) { return d; })
					.attr('value', function(d) { return d; })
			//this determines starting year	
			d3.select('#selectYearfrom')
					.on('change', function(){
					d3.select("#main").selectAll('g').remove();
					//check which value is assigned to each dropdown
					var selection = document.getElementById('selectionWidget');
					var localityName = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearfrom');
					var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearto');
					var selectedYearto = selection.options[selection.selectedIndex].value;
					
					var selection=document.getElementById("selectEnergytype");
					var selectedEnergy=selection.options[selection.selectedIndex].value;
				

				  //redraw a graph with a change to its axis
				        var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
						
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									   drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
				  });
			/*//line graph drawing part
			//checking if checkbox is checked(changed)
				d3.select("#checkboxLinegraph")
				   .on('change', function(){
					/*var checkIfOn = document.getElementById("checkboxLinegraph").checked;
					if (checkIfOn == true)	 {
						var selection = document.getElementById('selectionWidget');
						var localityName = selection.options[selection.selectedIndex].value;
						
						var selection= document.getElementById('selectYearfrom');
					    var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					    var selection= document.getElementById('selectYearto');
					    var selectedYearto = selection.options[selection.selectedIndex].value;

						drawLine(localityName, selectedYearfrom, selectedYearto);
						}
					else {
						d3.select("#main").selectAll('#lineGraphLine').remove();}

					});*/

			//this determines ending year			
			 d3.select('#selectYearto').selectAll('option')
			        .data(totalYear)
			        .enter().append('option')
					.html(function(d) { return d; })
					.attr('value', function(d) { return d; })
					
				d3.select('#selectYearto')	
					.on('change', function(){
					d3.select("#main").selectAll('g').remove();
					//check which value is assigned to each dropdown
					var selection = document.getElementById('selectionWidget');
					var localityName = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearfrom');
					var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearto');
					var selectedYearto = selection.options[selection.selectedIndex].value;
					
					var selection=document.getElementById("selectEnergytype");
					var selectedEnergy=selection.options[selection.selectedIndex].value;

				  //redraw a graph with a change to its axis
				        var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
						
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									   drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									   drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
	
			})
			
			//code for a reset button (restore everything to a default state)
			d3.select('#buttonReset')
			  .on('click', function(){
			      d3.select("#main").selectAll('g').remove();
				  document.getElementById("checkboxLinegraph").checked = false;
				  document.getElementById("checkboxPro").checked = true;
				  document.getElementById("checkboxCon").checked = true;
				  document.getElementById("radioBarchart").checked = true;
				  document.getElementById("radioScatterplot").checked = false;
				  //change selected value of three dropdowns
				  document.getElementById("selectionWidget").value = "North America";
				  document.getElementById("selectYearfrom").value = "1980";
				  document.getElementById("selectYearto").value = "2012";
			      drawBarChart('North America', 1980, 2012, localities, localities, bothOn);
				  }
			  )
			//display a graphy according to check and uncheck of production/consumption
			d3.select("#checkboxPro")
			  .on('change', function(){
					var checkIfProOn = document.getElementById("checkboxPro").checked;
					
					var selection = document.getElementById('selectionWidget');
					var localityName = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearfrom');
					var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearto');
					var selectedYearto = selection.options[selection.selectedIndex].value;
					
					var selection=document.getElementById("selectEnergytype");
					var selectedEnergy=selection.options[selection.selectedIndex].value;

				  //redraw a graph with a change to its axis
				        var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
					
					d3.select("#main").selectAll('g').remove();
					//check which value is assigned to each dropdown
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									   drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
				})
				
			d3.select("#checkboxCon")
			  .on('change', function(){
					var selection = document.getElementById('selectionWidget');
					var localityName = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearfrom');
					var selectedYearfrom = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearto');
					var selectedYearto = selection.options[selection.selectedIndex].value;
					
					var selection=document.getElementById("selectEnergytype");
					var selectedEnergy=selection.options[selection.selectedIndex].value;

				  //redraw a graph with a change to its axis
				        var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
					//if (checkIfProOn == true)	 {
					d3.select("#main").selectAll('g').remove();
					//check which value is assigned to each dropdown
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);}
									else if (checkIfConOn ==false) {
									   drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							else if (checkIfRadioScatterOn == true){
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}
							}
							if (checkIfLineOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon,  bothOn);}
								    else if (checkIfConOn == false) {
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);}}
								else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);}
									else if (checkIfConOn ==false) {
									    drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);}	
								}	
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							else if (checkIfRadioScatterOn == true){
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
							if (checkIfLineOn == true) {
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);}
						}
	
					//}		
				})
			
			
			//anything that should run before (as a part of data loading function) write above this line
			}});

/////////////////////////////Bar chart///////////////////////////////////////		
		function drawBarChart(localityName, selectedYearfrom, selectedYearto, energyType, energyType2, bothOnOrNot)
		{
			// get data value to use in the chart
            var energyProductionUSA = energyType[localityName].energyProduction;
			var energyProductionUSA2 = energyType2[localityName].energyProduction;
			//get starting year 
			//find the nth location of "selectedYearfrom" in totalYear
			//first convert passed variables to numbers
			var yearStart= Number(selectedYearfrom);
			var yearEnd= Number(selectedYearto);
			var yearStartLocation = totalYear.indexOf(yearStart);
			var yearEndLocation = totalYear.indexOf(yearEnd);
			//use that location(should be 0-32) to create a new variable out of energyProductionUSA
		    var dataset = [];
			for (var i = yearStartLocation; i<=yearEndLocation; i++){
				if (typeof energyProductionUSA[i] == "number" ) {dataset.push(energyProductionUSA[i])}
				else {energyProductionUSA[i] = 0; dataset.push(energyProductionUSA[i]);}
			};
			
			var dataset2 = [];
			for (var i = yearStartLocation; i<=yearEndLocation; i++){
				if (typeof energyProductionUSA2[i] == "number" ) {dataset2.push(energyProductionUSA2[i])}
				else {energyProductionUSA2[i] = 0; dataset2.push(energyProductionUSA2[i]);}
			};
			
			//use a loop to save only the data in between the year period
		
			// figure out maximum energy production
			//DID NOT CHANGE INTENTIONALLY
			//wanted to keep axis stable, didn't want to change abruptly when change year because it may be confusing
			var maxProduction = 0; 
			//maximum data point may be different for each dataset, so compare and take whichever is higher 
			if (d3.max(dataset) >= d3.max(dataset2)) {maxProduction = d3.max(dataset)}
			else if (d3.max(dataset) < d3.max(dataset2)){maxProduction = d3.max(dataset2)};
			
		
			// chart size 
			var chartWidth = 500;
			var chartHeight = 120;

			// figure out the width of individual bars
			var barWidth = chartWidth / dataset.length;

			// create a y scale
			var yScale = d3.scale.linear()
				.domain([0, maxProduction])
				.range([chartHeight, 0] );
			
			//create an upside down y scale
			var yScale2 = d3.scale.linear()
				.domain([0, maxProduction])
				.range([0, chartHeight]);

			// create a group for the bar chart
			d3.select("#titleData")
				.html("Primary energy production (Quadrillion BTU)")//add here which year is displayed
			d3.select("#titleCoun")
			    .html(localityName)
				
			//here, save value in this variable to access it in timescale. X-axis will shrink in relation to the data size. 
            var aha = [];
			var group = d3.select("#main").append("g")
				.attr("transform", "translate(100, 100)");//location of the graph
			
			//division point means that after this point of array, data belongs to the second dataset.
			var divisionPoint = Number(dataset.length)
			
			//dataset and dataset2 combined for in case both should be displayed
			var datasetCombined = dataset.concat(dataset2)
			var datasetBlank = [];
			
			
			group.selectAll("rect")
				.data(function(d){
						if (bothOnOrNot == 1){
						return datasetCombined
						}
						else if (bothOnOrNot == 2){
						return dataset
						}
						else if (bothOnOrNot ==3) {
						return dataset2
						}
						else {
						return datasetBlank}})
				.enter().append('rect')
				.attr("x", function(d, i) { 
					aha.push(i*barWidth)
					if (divisionPoint < 33) {
						if (i <divisionPoint) {return i*(barWidth)}
						else {return (i-divisionPoint) * (barWidth)}
					}
					else {
						if (i <33) {return i*(barWidth)}
						else {return (i-33) * (barWidth)}
					}
				})
				//this part is also different for each dataset
				.attr("y", function(d, i) {
					if(bothOnOrNot == 1){
						if (i<divisionPoint) {return yScale(d)}
						else {return chartHeight}}
					else if(bothOnOrNot == 2) {return yScale(d)}
					else if(bothOnOrNot ==3) {return chartHeight}
				})
				.attr("width", barWidth)
				.attr("height", function(d) { 
					return chartHeight - yScale(d); 
				})
				.attr("id", function(d){
					if (bothOnOrNot == 1) {
						if (i<divisionPoint){return "rectPro1"}
						else {return "rectCon1"}
					}
					else if(bothOnOrNot == 2) {return "rectPro2"}
					else if(bothOnOrNot ==3) {return "rectCon2"}
					})
				.style("stroke", "white")
				.style("fill", function(d, i){
				//depending on the dataset, color will be different
				  if (bothOnOrNot == 1){
					if (i <divisionPoint) {
				      return "#99ccff"}
					else {return "#ff9966"}}
				  else if(bothOnOrNot == 2) {return "#99ccff"}
				  else if(bothOnOrNot ==3) {return "#ff9966"}
				});
			
			// create x axis
			var timeScale = d3.time.scale()
				.domain([new Date(yearStart, 1, 1), new Date(yearEnd, 1, 1)])
				.range([0, 500])
				//.range([0, barWidth + aha[(aha.length/2)-1]])
				//console.log(aha[(aha.length/2)-1])
				
/////////////above code needs work  (to make adaptive x axis)
					
			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom')
		
			var xAxisShort = d3.svg.axis()
			    .scale(timeScale)
				.orient('bottom')
                .ticks(d3.time.years, 1);
				
			//if data span is small, call xAxis Short, if not, call usual one.
			if ((yearEnd - yearStart) < 10){
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + chartHeight + ')')
				.call(xAxisShort);}
			else {group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + chartHeight + ')')
				.call(xAxis);}	
			
             // create y axis
			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');
			var yAxis2 = d3.svg.axis()
				.scale(yScale2)
				.orient('left');

			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(-2,0)')
				.call(yAxis);
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(-2,120)')
				.call(yAxis2);
			
		}
/////////////////////<!--code for scatterplot-->
	function drawScatter(localityName, selectedYearfrom, selectedYearto, energyType, energyType2, bothOnOrNot)
		{
	var energyProductionUSA = energyType[localityName].energyProduction;
	var energyProductionUSA2 = energyType2[localityName].energyProduction;
	
    var yearStart= Number(selectedYearfrom);
	var yearEnd= Number(selectedYearto);
	var yearStartLocation = totalYear.indexOf(yearStart);
	var yearEndLocation = totalYear.indexOf(yearEnd);
			//use that location(should be 0-32) to create a new variable out of energyProductionUSA
	 var dataset = [];
			for (var i = yearStartLocation; i<=yearEndLocation; i++){
				if (typeof energyProductionUSA[i] == "number" ) {dataset.push(energyProductionUSA[i])}
				else {energyProductionUSA[i] = 0; dataset.push(energyProductionUSA[i]);}
			};
			
			var dataset2 = [];
			for (var i = yearStartLocation; i<=yearEndLocation; i++){
				if (typeof energyProductionUSA2[i] == "number" ) {dataset2.push(energyProductionUSA2[i])}
				else {energyProductionUSA2[i] = 0; dataset2.push(energyProductionUSA2[i]);}
			};
		
	// figure out maximum energy production
	var maxProduction = d3.max(dataset);

	if (d3.max(dataset) >= d3.max(dataset2)) {maxProduction = d3.max(dataset)}
	else if (d3.max(dataset) < d3.max(dataset2)){maxProduction = d3.max(dataset2)};
	
	// chart size 
	var chartWidth = 500;
	var chartHeight = 120;
	var scatterWidth = (chartWidth / (dataset.length - 1)) ;
	console.log(dataset.length)
	console.log(scatterWidth)
	var yScale = d3.scale.linear()
				.domain([0, maxProduction])
				.range([chartHeight, 0]);
	
	d3.select("#titleData")
	   .html("Primary energy production (Quadrillion BTU)")//add here which year is displayed
	d3.select("#titleCoun")
		.html(localityName)
	
	//division point means that after this point of array, data belongs to the second dataset.
	var divisionPoint = Number(dataset.length)
	console.log(dataset)
	
	var datasetCombined = dataset.concat(dataset2)
	var datasetBlank = [];
	console.log(datasetCombined)
    var group = d3.select("#main").append("g")
              .attr("transform", "translate(100, 100)");
	//here, save value in this variable to access it in timescale. X-axis will shrink in relation to the data size. 
	//var aha = [];		  
       group.selectAll("circle")
	        .data(function(d){
						if (bothOnOrNot == 1){
						return datasetCombined
						}
						else if (bothOnOrNot == 2){
						return dataset
						}
						else if (bothOnOrNot ==3) {
						return dataset2
						}
						else {
						return datasetBlank}})
			.enter()
			.append("circle")
			//starting point should not be zero because then the result will be different from bar chart
			.attr("cx", function(d, i) {
			//aha.push(i*scatterWidth);

			if (divisionPoint<33) {
				if (i<divisionPoint) {return i*scatterWidth}
				else {return (i-divisionPoint) * scatterWidth}
			}
			else {
				if (i<33) {return i*scatterWidth}
				else {return (i-33) * scatterWidth}
				}
			
			})
			.attr("cy", function(d){
                 return yScale(d);})
			.attr("r", 3)	
			.style("fill", function(d, i){
				if(bothOnOrNot == 1){
			    if (divisionPoint<33){
				  if (i<divisionPoint) {
				      return "#99ccff"}
				  else {return "#ff9966"}}
				else {
					if (i<33) {return "#99ccff"}
					else {return "#ff9966"}
				}}
				else if(bothOnOrNot == 2) {return "#99ccff"}
				else if(bothOnOrNot ==3) {return "#ff9966"}
			});
			
	        var timeScale = d3.time.scale()
				.domain([new Date(yearStart, 1, 1), new Date(yearEnd, 1, 1)])
				//.range([0, aha[aha.length -1]])
				  .range([0, 500])  
				  
			//have to generate tick values.....
			//if end year - start year > 5 then tick interval is 5 years; if not 1 year
			//get the start year and end year and make a loop
			
		
			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom')
				//.tickValues;

            var xAxisShort = d3.svg.axis()
			    .scale(timeScale)
				.orient('bottom')
                .ticks(d3.time.years, 1);
				
			//if data span is small, call xAxis Short, if not, call usual one.
			if ((yearEnd - yearStart) < 10){
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + chartHeight + ')')
				.call(xAxisShort)
			}
			else {
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + chartHeight + ')')
				.call(xAxis)}

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');

			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(-2,0)')
				.call(yAxis);
         }
		 
	 
///////////////////////starts line graph	 
    function drawLine(localityName, selectedYearfrom, selectedYearto, energyType, energyType2, bothOnOrNot)
		{
	var energyProductionUSA = energyType[localityName].energyProduction;
	var energyProductionUSA2 = energyType2[localityName].energyProduction;
	
	var yearStart= Number(selectedYearfrom);
	var yearEnd= Number(selectedYearto);
	var yearStartLocation = totalYear.indexOf(yearStart);
	var yearEndLocation = totalYear.indexOf(yearEnd);
	//use that location(should be 0-32) to create a new variable out of energyProductionUSA
	 var dataset = [];
			for (var i = yearStartLocation; i<=yearEndLocation; i++){
				if (typeof energyProductionUSA[i] == "number" ) {dataset.push(energyProductionUSA[i])}
				else {energyProductionUSA[i] = 0; dataset.push(energyProductionUSA[i]);}
			};
			
			var dataset2 = [];
			for (var i = yearStartLocation; i<=yearEndLocation; i++){
				if (typeof energyProductionUSA2[i] == "number" ) {dataset2.push(energyProductionUSA2[i])}
				else {energyProductionUSA2[i] = 0; dataset2.push(energyProductionUSA2[i]);}
			};
			
	//datasets are correctly passed - no problem so far - 
	// figure out maximum energy production
	var maxProduction = 0;
	if (d3.max(dataset) >= d3.max(dataset2)) {maxProduction = d3.max(dataset)}
	else if (d3.max(dataset) < d3.max(dataset2)){maxProduction = d3.max(dataset2)};

			// chart size 
	var chartWidth = 500;
	var chartHeight = 120;
	var scatterWidth = chartWidth / (dataset.length -1);
	
	var yScale = d3.scale.linear()
				.domain([0, maxProduction])
				.range([chartHeight, 0]);
				
	//scale for scatterplot	
	var yScale2 = d3.scale.linear()
				.domain([0, maxProduction])
				.range([chartHeight, 0]);
				
	var yScale3 = d3.scale.linear()
				.domain([0, maxProduction])
				.range([0, chartHeight]);			
				
				

	var aha = [];	
    
	var divisionPoint = Number(dataset.length)
			
	//dataset and dataset2 combined for in case both should be displayed
	var datasetCombined = dataset.concat(dataset2)
	var datasetBlank = [];
	console.log(divisionPoint)
	//line drawing for first line (energyType )
	/*var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					aha.push(scatterWidth * i);
					//this should apply to dataset with less years
						if (bothOnOrNot == 1) {
							if (divisionPoint < 33) {return scatterWidth * i}
							else {
								if (i<33) {return scatterWidth * i}
								else {return scatterWidth * (i-33)}
							}
						}
						else if (bothOnOrNot == 2) {return scatterWidth * i}
						else if (bothOnOrNot == 3) {return scatterWidth * i}
						})
					.y(function(d){
						if (bothOnOrNot == 1) {
							if (divisionPoint <33) {return yScale(d)}
							else {
								if (i<divisionPoint) {return yScale(d)}
								else {return yScale2(d)}
							}}
						else if (bothOnOrNot == 2) {return yScale(d)}
						else if (bothOnOrNot == 3) {return yScale2(d)}
					})
					.interpolate("linear");	*/



	var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					aha.push(scatterWidth * i)
					return scatterWidth * i})
					//this should apply to dataset with less years
						
					.y(function(d){return yScale(d)})
					.interpolate("linear");		
	//line drawing for second line (energyType2)			
	var lineValue2 = d3.svg.line()
	                .x(function(d, i) { 
					aha.push(scatterWidth * i)
					return scatterWidth * i})
					//this should apply to dataset with less years
						
					.y(function(d){return yScale2(d)})
					.interpolate("linear");		
	//this is for bar graph
	var lineValue3 = d3.svg.line()
	                .x(function(d, i) { 
					aha.push(scatterWidth * i)
					return scatterWidth * i})
					//this should apply to dataset with less years
						
					.y(function(d){return yScale3(d) + chartHeight})
					.interpolate("linear");	
	
	
					
	//line drawing for second line (energyType2)
	/*var lineValue2 = d3.svg.line()
	                .x(function(d, i) { 
					aha.push(scatterWidth * i);
					//this should apply to dataset with less years
						if (bothOnOrNot == 1) {
							if (i<33) {return scatterWidth * i}
							else {return scatterWidth * (i-33)}
							}
						}
						else if (bothOnOrNot == 2) {return scatterWidth * i}
						else if (bothOnOrNot == 3) {return scatterWidth * i}
						})
					.y(function(d){
						if (bothOnOrNot == 1) {
							if (divisionPoint <33) {return yScale(d)}
							else {
								if (i<divisionPoint) {return yScale(d)}
								else {return yScale2(d)}
							}}
						else if (bothOnOrNot == 2) {return yScale(d)}
						else if (bothOnOrNot == 3) {return yScale2(d)}
					})
					.interpolate("linear");		*/		
				
				
				
				
	d3.select("#titleData")
	   .html("Primary energy production (Quadrillion BTU)")//add here which year is displayed
	d3.select("#titleCoun")
		.html(localityName)
	//run a function here to send dataset into Linevalue fucntion
	
	var whichDataToPass = 0;
	var dataPassingFunction = function(bothOnOrNot){
						if (bothOnOrNot == 1){
						whichDataToPass = datasetCombined;
						}
						else if (bothOnOrNot == 2){
						whichDataToPass = dataset;
						}
						else if (bothOnOrNot ==3) {
						whichDataToPass = dataset2;
						}
						else {
						whichDataToPass = datasetBlank;}
						};
		
	dataPassingFunction(bothOnOrNot);
    var group = d3.select("#main").append("g")
              .attr("transform", "translate(100, 100)");
		  if (bothOnOrNot == 1) {
		  var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
			if (checkIfRadioBarOn == true) {
				group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine")
                     .attr("d", lineValue(dataset))
                     .attr("stroke", "#0088cc")
                     .attr("stroke-width", 2)
                     .attr("fill", "none");
				group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine2")
                     .attr("d", lineValue3(dataset2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
                     .attr("fill", "none");	
			}
			else {group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine")
                     .attr("d", lineValue(dataset))
                     .attr("stroke", "#0088cc")
                     .attr("stroke-width", 2)
                     .attr("fill", "none");
			group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine2")
                     .attr("d", lineValue(dataset2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
                     .attr("fill", "none");}
		  }
		  else if (bothOnOrNot ==2) {
			group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine")
                     .attr("d", lineValue(dataset))
                     .attr("stroke", "#0088cc")
                     .attr("stroke-width", 2)
                     .attr("fill", "none");
		  }
		  else if (bothOnOrNot == 3) {
			group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine")
                     .attr("d", lineValue(dataset2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
                     .attr("fill", "none");
		  }
		 
	           
			   
			   /*group.append("path")
	                 .attr("class", "line")
					 .attr("id", "lineGraphLine")
                     .attr("d", lineValue(whichDataToPass))
                     .attr("stroke", function(d, i){
						if(bothOnOrNot == 1){
							if (divisionPoint<33){
								if (i<divisionPoint) {
									return "#0088cc"}
								else {return "#ff661a"}}
							else {
								if (i<33) {return "#0088cc"}
								else {return "#ff661a"}
								}
						}
						else if(bothOnOrNot == 2) {return "#0088cc"}
						else if(bothOnOrNot ==3) {return "#ff661a"}
						})
                     .attr("stroke-width", 2)
                     .attr("fill", "none");
					 
				group.append("path")
					  .attr("class", "line")
					 .attr("d", lineValue(dataset))
					 .attr("stroke", "black")
					 .attr("stroke-width", 2)
                     .attr("fill", "none");*/
					 
			
	/*var timeScale = d3.time.scale()
				.domain([new Date(yearStart, 1, 1), new Date(yearEnd, 1, 1)])
				.range([0, aha[aha.length -1]])

			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom');
				
            var xAxisShort = d3.svg.axis()
			    .scale(timeScale)
				.orient('bottom')
                .ticks(d3.time.years, 1);
				
			//if data span is small, call xAxis Short, if not, call usual one.
			if ((yearEnd - yearStart) < 10){
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + chartHeight + ')')
				.call(xAxisShort)
			} 
			// create y axis
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + chartHeight + ')')
				.call(xAxis);

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');	
				
			group.append("g")
				.attr('class', 'axis')
				.attr('transform', 'translate(-2,0)')
				.call(yAxis);*/
         }   
	//when radio button for bar chart is checked, draw bar chart
				function radioBarchartOn(){
				d3.select("#main").selectAll('g').remove();
					
					var bothOn = 1;
				var proOn = 2;
				var conOn = 3;
				var bothOff = 0;
					
					var checkIfRadioBarOn = document.getElementById("radioBarchart").checked;
						var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
						var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
						var checkIfProOn = document.getElementById("checkboxPro").checked;
						var checkIfConOn = document.getElementById("checkboxCon").checked;
					
					var selection = document.getElementById('selectionWidget');
					var localityName = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearfrom');
					var selectedYearfrom = selection.options[selection.selectedIndex].value;
									
					var selection= document.getElementById('selectYearto');
					var selectedYearto = selection.options[selection.selectedIndex].value;
					
					var selection=document.getElementById("selectEnergytype");
					var selectedEnergy=selection.options[selection.selectedIndex].value;
				
					var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;

					if (checkIfLineOn == true) {
					if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);
										}
									else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);
									}	
								}
							}
					}
					else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);
									}	
								}
							}
					}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);
										}
								    else if (checkIfConOn == false) {
										drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);
									}
								}	
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);
								}
						}
					}
					else {
					if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);
										}
									else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);
									}	
								}
							}
					}
					else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);
									}	
								}
							}
					}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);
										}
								    else if (checkIfConOn == false) {
										drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);
									}
								}	
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioBarOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);										
									}	
								}
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioBarOn == true) {
								drawBarChart(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);
								}
						}
					}
					}
					
					//when radio button for scatterplot is checked, draw scatter
				function radioScatterOn(){
				d3.select("#main").selectAll('g').remove();
					
				var bothOn = 1;
				var proOn = 2;
				var conOn = 3;
				var bothOff = 0;
					
					
					var checkIfRadioScatterOn = document.getElementById("radioScatterplot").checked;
					var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;
					var checkIfProOn = document.getElementById("checkboxPro").checked;
					var checkIfConOn = document.getElementById("checkboxCon").checked;
					
					var selection = document.getElementById('selectionWidget');
					var localityName = selection.options[selection.selectedIndex].value;
					
					var selection= document.getElementById('selectYearfrom');
					var selectedYearfrom = selection.options[selection.selectedIndex].value;
									
					var selection= document.getElementById('selectYearto');
					var selectedYearto = selection.options[selection.selectedIndex].value;
					
					var selection=document.getElementById("selectEnergytype");
					var selectedEnergy=selection.options[selection.selectedIndex].value;
					
					var checkIfLineOn = document.getElementById("checkboxLinegraph").checked;

					if (checkIfLineOn == true) {
						if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);
										}
									else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);
									}	
								}
							}
					}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);
										}
								    else if (checkIfConOn == false) {
										drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);
									}
								}	
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);
									drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);
										drawLine(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioScatterOn == true) {
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);
								drawLine(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);
								}
						}
					}
					else {
					if (selectedEnergy == "Total Primary Energy"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOn);
										}
									else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localities, localitiesEnCon, bothOff);
									}	
								}
							}
					}
					else if (selectedEnergy == "Total Electricity"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesElectPro, localitiesElectCon, bothOff);
									}	
								}
							}
					}
						else if (selectedEnergy == "Renewable Electricity"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOn);
									}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewElectPro, localitiesRenewElectCon, bothOff);
									}	
								}
							}
						}
						else if (selectedEnergy == "Renewable Biofuel"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOn);
										}
								    else if (checkIfConOn == false) {
										drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, proOn);
									}
								}	
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesRenewBioPro, localitiesRenewBioCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Coal"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, conOn);
										}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCoalPro, localitiesCoalCon, bothOff);
										}	
								}
							}
						}
						else if (selectedEnergy == "Petroleum"){
							if (checkIfRadioScatterOn == true) {
								if (checkIfProOn == true) {
								    if (checkIfConOn == true) {
								        drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOn);
										}
								    else if (checkIfConOn == false) {
									drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, proOn);
									}
								}
							    else if (checkIfProOn == false) {
							        if (checkIfConOn == true){
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, conOn);
									}
									else if (checkIfConOn ==false) {
									    drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesPetroPro, localitiesPetroCon, bothOff);										
									}	
								}
							}
						}
						else if (selectedEnergy == "CO2 Emissions per Capita"){
							if (checkIfRadioScatterOn == true) {
								drawScatter(localityName, selectedYearfrom, selectedYearto, localitiesCO2, localitiesCO2 , proOn);
								}
						}
					}
					}	 
	
	
	
			
			
		
	<!--by defalut, it is a 2012 total energy consumption/production for the select region-->

	
	<!--title Advanced OPTION-->
	<!--title GRAPH TYPE-->
	<!--radio button BAR CHART-->
	<!--sub-checkbox LINE CHART-->
	<!--radio button SCATTERPLOT-->
	<!--title DATA TYPE-->
	<!--text "Select up to five items at a time"-->
	<!--5 drop-downs for available data types-->
	<!--checkbox for production/consumption (by defalut select both)-->
	<!--title YEAR-->
	<!--2 dropdown boxes for year side by side (from A to B)-->
	<!--title Region/Country-->
	<!--text "Select up to five items at a time"-->
    <!--5 drop-downs for country name and region name-->
	<!--button for OK-->
	<!--data will be saved and the graph will be redrawn-->
	<!--button for RESET, which erases drop down data and sets others to default-->
	<!--button for CANCEL-->
	
	
	<!--additional features to add: animated scatterplot, sort by different order, enabling clicking one each bar/scatter/line(?), advanced option-->
	<!--add tick for the beginning value-->
	</script>
</body>


</html>
